<div class="activity-card card h-100 position-relative">
  <% if activity.user.image_url %>

  <!-- Top-right avatar with external badge -->
  <div class="card-avatar-container avatar-top-right" style="width: 100px; height: 100px;">
    <div class="avatar-wrapper">
      <%= image_tag activity.user.image_url, class: "avatar-verified", alt: "User avatar" %>
    </div>
    <div class="verified-badge">
      <i class="fas fa-check-circle"></i>
    </div>
  </div>
  <% end %>

    <%= image_tag activity.image_url, class: "card-img-top" %>

  <div class="card-body">
    <h5 class="card-title"><%= activity.name %></h5>
    <div class="activity-location mb-2">
      <i class="fas fa-map-marker-alt text-primary me-2"></i>
      <span class="text-muted"><%= activity.location %></span>
    </div>
    <p class="card-text text-muted"><%= truncate(activity.description, length: 100) %></p>
    <div class="d-flex justify-content-between align-items-center mt-3">
      <p class="category-badge mb-0">
        <span class="badge bg-secondary"><%= activity.category %></span>
      </p>
      <div class="dropdown">
        <small class="text-muted dropdown-toggle"
               data-bs-toggle="dropdown"
               aria-expanded="false"
               style="cursor: pointer;">
          <i class="far fa-clock me-1"></i>
          <%= time_ago_in_words(activity.created_at) %> ago
        </small>
        <ul class="dropdown-menu">
          <li>
            <span class="dropdown-item-text">
              Posted: <%= activity.created_at.strftime("%B %d, %Y at %l:%M %p") %>
            </span>
          </li>
          <% if activity.updated_at != activity.created_at %>
            <li>
              <span class="dropdown-item-text">
                Updated: <%= activity.updated_at.strftime("%B %d, %Y at %l:%M %p") %>
              </span>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <div class="card-footer bg-white">
    <%= link_to "More Details", activity_path(activity), class: "btn btn-primary w-100" %>
  </div>
</div>
